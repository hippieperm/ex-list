# 경매 데이터 검색 시스템

경매 데이터를 쉽게 검색하고 관리할 수 있는 통합 시스템입니다.

## 주요 기능

- 🔍 **통합 검색**: 품목, 출품자, 낙찰자를 한 번에 검색
- 🌐 **한영 무관 검색**: 한글과 영문을 구분하지 않고 검색
- ⌨️ **초성 검색**: 초성만으로도 빠른 검색 가능 (예: '소나무' → 'ㅅㄴㅁ')
- 📊 **엑셀 업로드**: 경매 데이터를 엑셀 파일로 쉽게 업로드
- 🎨 **모던 UI**: 깔끔하고 직관적인 사용자 인터페이스

## 기술 스택

- **Frontend**: Next.js 15, TypeScript, Tailwind CSS
- **Backend**: Supabase (PostgreSQL)
- **검색**: PostgreSQL 확장 (pg_trgm, unaccent)
- **파일 처리**: SheetJS (xlsx)

## 설치 및 실행

### 1. 의존성 설치

```bash
npm install
```

### 2. 환경 변수 설정

`.env.local` 파일을 생성하고 Supabase 설정을 추가하세요:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 3. 데이터베이스 설정

Supabase SQL Editor에서 `supabase-schema.sql` 파일의 내용을 실행하세요.

### 4. 개발 서버 실행

```bash
npm run dev
```

## 사용법

### 검색 기능

1. 메인 페이지에서 검색창에 검색어를 입력
2. 품목명, 출품자명, 낙찰자명을 한 번에 검색
3. 한글/영문 구분 없이 검색 가능
4. 초성 검색 지원 (예: 'ㅅㄴㅁ' → '소나무')

### 데이터 업로드

1. "업로드" 탭으로 이동
2. 엑셀 파일 선택 (형식: .xlsx, .xls, .csv)
3. 업로드 버튼 클릭

### 엑셀 파일 형식

다음 컬럼이 포함된 단일 시트:

| 컬럼명 | 설명        | 필수 |
| ------ | ----------- | ---- |
| 품명   | 경매 품목명 | ✓    |
| 수량   | 품목 수량   |      |
| 출품자 | 출품자명    |      |
| 낙찰가 | 낙찰 금액   |      |
| 낙찰자 | 낙찰자명    |      |
| 비고   | 추가 정보   |      |

## 검색 기능 상세

### 가중치 시스템

검색 결과는 다음 우선순위로 정렬됩니다:

1. **정확한 매치** (가중치 1.0)
2. **정확한 초성 매치** (가중치 0.9)
3. **시작 부분 매치** (가중치 0.8)
4. **초성으로 시작** (가중치 0.7)
5. **부분 매치** (가중치 0.6)
6. **초성 부분 매치** (가중치 0.5)

### 검색 예시

- "소나무" 검색 → 소나무를 구매한 사람들이 상위에 표시
- "ㅅㄴㅁ" 검색 → 초성 검색으로 소나무 관련 결과 표시
- "apple" 검색 → 한영 구분 없이 사과 관련 결과 표시

## 데이터베이스 구조

### 테이블

- **items**: 품목 정보
- **buyers**: 출품자/낙찰자 정보
- **orders**: 거래 내역

### 함수

- **ko_initials()**: 한국어 초성 추출
- **norm()**: 검색 정규화
- **search_entities()**: 통합 검색

## 라이선스

MIT License
